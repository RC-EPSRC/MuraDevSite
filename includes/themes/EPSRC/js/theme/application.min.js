function setEqualHeight(e) {
  var t = 0;
  e.each(function() {
    currentHeight = $(this).height();
    currentHeight > t && (t = currentHeight);
  });
  e.css("height", t);
}

function setHeaderButtons() {
  $(window).width() > 1120 && $(window).width() < 1200 || $(window).width() > 1320 ? $("#slider .flex-direction-nav").show(0) : ($.browser.msie && $.browser.version == "8.0" || $.browser.msie && $.browser.version == "7.0" || $.browser.msie && $.browser.version == "6.0") && $(window).width() > 1120 ? $("#slider .flex-direction-nav").show(0) : $("#slider .flex-direction-nav").hide(0);
}

function fireFunctions(e) {
  e = e.toString().replace('"', "").replace('"', "");
  if (e == "core") {
    $("body").removeClass().addClass("max768");
    $("#content .tertiary .slide div").removeAttr("style");
    $("#content .primary h1").removeAttr("style");
    $("#content .primary .small-image.feature h2").removeAttr("style");
    $("#slider h2").adaptiveText({
      minWidth: 1,
      maxWidth: 767,
      minFontSize: 20,
      maxFontSize: 96,
      compressor: 1
    });
    $("header").on("click", ".search", function(e) {
      $("header fieldset").fadeToggle();
      e.preventDefault();
    });
    var t = $("header .primary ul").not(".sub-nav ul").clone(), n = $("header .secondary ul").clone().addClass("secondary");
    $('<nav class="mobile"></nav>').prependTo("header .wrap");
    $(t).prependTo("header .mobile");
    $(n).prependTo("header .mobile");
    $("header .mobile").hide(0);
    $('<a href="#" class="menu"><strong>Menu</strong> <span></span></a>').insertAfter("header .logo");
    $('<a href="#" class="search">Search</a>').insertAfter("header .logo");
    $(".large-image.feature .copy").removeAttr("style");
    $(".small-image.feature.three").show(0);
    $("nav.tertiary").off("click").on("click", "h2", function() {
      $(this).parent().find("> ul").fadeToggle();
    });
    $("aside").off("click").on("click", "h2", function() {
      $(this).next().fadeToggle();
      $(this).toggleClass("open");
    });
    var r = $(".event-tabs div.overview").clone(), i = $(".event-tabs div.location").clone(), s = $(".event-tabs div.agenda").clone();
    r.appendTo(".event-tabs ul .overview");
    i.appendTo(".event-tabs ul .location");
    s.appendTo(".event-tabs ul .agenda");
    $(".event-tabs ul li").off("click").on("click", "span", function() {
      $(this).parent().find("div").fadeToggle();
    });
  } else {
    $("header .mobile").remove();
    $("header .menu").remove();
    $("header .search").remove();
    $("nav.tertiary ul").removeAttr("style");
    $(".event-tabs ul li div").remove();
    $(".event-tabs div").removeAttr("style");
    $(".event-tabs ul li").removeClass("active");
    $(".event-tabs ul li.overview").addClass("active");
    $("header fieldset").removeAttr("style");
    $("#slider h2").removeAttr("style");
  }
  if (e == "grid990") {
    $("body").removeClass().addClass("min768");
    $("#content .tertiary .slide div").removeAttr("style");
    $("#content .primary h1").removeAttr("style");
    $("#content .primary .small-image.feature h2").removeAttr("style");
    setEqualHeight($("#content .primary .small-image.feature h2"));
    $("#slider h2").removeAttr("style");
    $(".large-image.feature").each(function() {
      var e = $("img", this).height();
      $(".copy", this).height(e - 1);
    });
    smallLength == "3" && $(".small-image.feature.three").hide(0);
  } else $(".small-image.feature.three").show(0);
  if (e != "core") {
    $("header .primary .nav li a").hover(function() {
      $("header .primary .nav li a.active").removeAttr("class").attr("data-class", "active");
      var e = $(this).parent().attr("class");
      if (e != hoveringClass) {
        if (currentlyOpen) {
          clearTimeout(timeToCloseKey);
          openArea(e, !1);
        } else timeToOpenKey = setTimeout(function() {
          openArea(e, !0);
        }, hoverDurationToOpen);
        hoveringClass = e;
      }
    }, function() {
      clearTimeout(timeToOpenKey);
      currentlyOpen && (timeToCloseKey = setTimeout(function() {
        closeArea(hoveringClass);
      }, nonHoverDurationToClose));
    });
    $("header .primary .sub-nav").hover(function() {
      clearTimeout(timeToCloseKey);
    }, function() {
      timeToCloseKey = setTimeout(function() {
        closeArea(hoveringClass);
      }, nonHoverDurationToClose);
    });
    $(".event-tabs div").removeAttr("style");
    $(".event-tabs ul li").removeClass("active");
    $(".event-tabs ul li.overview").addClass("active");
    $("header fieldset").removeAttr("style");
    $(".event-tabs ul li").off("click").on("click", "span", function() {
      var e = $(this).parent().attr("class");
      $(this).parent().attr("class").replace("active", "");
      $(".event-tabs ul li").removeClass("active");
      $(this).parent().addClass("active");
      $(".event-tabs div").hide(0);
      $(this).parent().parent().parent().find("div." + e).fadeIn();
    });
    $("#slider h2").removeAttr("style");
  } else $(".event-tabs div").removeAttr("style");
  if (e == "grid1140") {
    $("body").removeClass().addClass("min1200");
    $("#content .tertiary .slide div").removeAttr("style");
    $("#content .primary h1").removeAttr("style");
    $("#content .primary .small-image.feature h2").removeAttr("style");
    setEqualHeight($("#content .primary .small-image.feature h2"));
    $("#slider h2").removeAttr("style");
    $(".large-image.feature").each(function() {
      var e = $("img", this).height();
      $(".copy", this).height(e - 1);
    });
  }
}

function openArea(e, t) {
  var n = $(".primary .sub-nav." + e);
  $("header .primary .nav a").removeClass("hover");
  $("header .primary .sub-nav").hide(0);
  $("header .primary .nav li." + e + " a").addClass("hover");
  if (t) {
    n.fadeIn(animateTime / 4, easing);
    currentlyOpen = !0;
  } else {
    n.show(0);
    currentlyOpen = !0;
  }
}

function closeArea(e) {
  $("header .primary .sub-nav").fadeOut(animateTime / 6, easing);
  $("header .primary .nav a").removeClass("hover");
  $('header .primary .nav li a[data-class="active"]').removeAttr("data-class").attr("class", "active");
  currentlyOpen = !1;
  hoveringClass = "";
}

function copyrightDate() {
  var e = new Date;
  $("#copyright p span").text(e.getFullYear());
}

function initialiseLatestUpdatesSlider() {
  $("#latestupdates .slides").flexslider({
    controlNav: !1,
    directionNav: !0,
    touch: !0,
    slideshowSpeed: 7500,
    animationSpeed: 750,
    animation: "slide",
    selector: ".luwrap > .slide",
    slideshow: !1
  });
}

function initialiseKeyFactsSlider() {
  $("#keyfacts .slides").flexslider({
    controlNav: !1,
    directionNav: !0,
    touch: !0,
    slideshowSpeed: 7500,
    animationSpeed: 750,
    animation: "slide",
    selector: ".kfwrap > .slide",
    slideshow: !1
  });
}

function fireFunctionsIE(e) {
  e ? addMobileSliders() : addDesktopSliders();
}

function addDesktopSliders() {
  $("#latestupdates *").remove();
  $("#latestupdates").append($("#clonebag-latestupdates").clone().html());
  var e = 0, t = 1;
  $("#latestupdates .slides div.luitem").each(function(n, r) {
    e++;
    $(this).addClass("desktopset" + t);
    if (e == 4) {
      e = 0;
      t++;
    }
  });
  for (i = 1; i <= t; i++) $(".desktopset" + i).wrapAll('<div class="slide" />');
  initialiseLatestUpdatesSlider();
  $("#keyfacts *").remove();
  var n = $("#clonebag-keyfacts").clone().html();
  $("#keyfacts").html(n);
  var r = 0, s = 1;
  $("#keyfacts .slides div.kfitem").each(function(e, t) {
    r++;
    $(this).addClass("desktopsetB" + s);
    if (r == 4) {
      r = 0;
      s++;
    }
  });
  for (i = 1; i <= s; i++) $(".desktopsetB" + i).wrapAll('<div class="slide" />');
  initialiseKeyFactsSlider();
}

function addMobileSliders() {
  $("#latestupdates *").remove();
  $("#latestupdates").append($("#clonebag-latestupdates").clone().html());
  $("#latestupdates .slides div.luitem").each(function(e, t) {
    $(this).wrap('<div class="slide" />');
  });
  initialiseLatestUpdatesSlider();
  $("#keyfacts *").remove();
  $("#keyfacts").append($("#clonebag-keyfacts").clone().html());
  $("#keyfacts .slides div").each(function(e, t) {
    $(this).wrap('<div class="slide" />');
  });
  initialiseKeyFactsSlider();
}

$(document).ready(function() {
  copyrightDate();
  $("#content .secondary p.filter").on("click", "a", function(e) {
    var t = $(this).attr("class").replace(" active", "");
    $("#content .secondary p.filter a").removeClass("active");
    $(this).addClass("active");
    $("#content .secondary div.filter div").fadeOut(0);
    $("#content .secondary div.filter div." + t).fadeIn(animateTime / 4, easing);
    e.preventDefault();
  });
  $("header").on("click", ".menu", function(e) {
    $("header .mobile").fadeToggle();
    e.preventDefault();
  });
  $(".listing-filter").off("click").on("click", "h2", function() {
    $(this).toggleClass("open");
    $(this).parent().find("> fieldset").fadeToggle();
  });
  $("#clonebag-latestupdates").append($("#latestupdates .slides"));
  $("#clonebag-keyfacts").append($("#keyfacts .slides"));
  setHeaderButtons();
  $(window).resize(function() {
    setHeaderButtons();
  });
});

var smallLength = $(".small-image.feature").length, hoveringClass = "", hoverDurationToOpen = 100, timeToOpenKey = "", currentlyOpen = !1, nonHoverDurationToClose = 1e3, timeToCloseKey = "", easing = "easeInOutQuad", animateTime = 1e3, core = !0;

$(document).ready(function() {
  var e = $(document).width();
  e >= 768 && (core = !1);
  fireFunctionsIE(core);
});

$(window).resize(function() {
  var e = $(document).width();
  if (e >= 768) {
    core && fireFunctionsIE(!1);
    core = !1;
  } else {
    core || fireFunctionsIE(!0);
    core = !0;
  }
});